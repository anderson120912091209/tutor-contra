# 輕量級科目選擇器 🎯

## 設計理念

原版太重（heavy）→ 新版輕量化（compact）

### 問題
- ❌ 顯示所有類別和科目，佔用大量空間
- ❌ 科目越多，頁面越長
- ❌ 視覺負擔重

### 解決方案
- ✅ 可折疊設計，預設收起
- ✅ 按需展開，只顯示需要的內容
- ✅ 搜尋優先，快速找到科目
- ✅ 類別標籤式切換

## 🎨 UI 流程

### 初始狀態（最小化）
```
┌────────────────────────────────────┐
│ [數學 ×] [英文 ×] [程式設計 ×]       │
└────────────────────────────────────┘
┌────────────────────────────────────┐
│      [+ 選擇教學科目 (3)]           │
└────────────────────────────────────┘
```
**佔用空間**: 約 100px 高度

### 展開狀態
```
┌────────────────────────────────────┐
│ [數學 ×] [英文 ×] [程式設計 ×]       │
└────────────────────────────────────┘
┌────────────────────────────────────┐
│           [收起]                    │
└────────────────────────────────────┘
┌────────────────────────────────────┐
│ [搜尋科目...]                       │
│                                    │
│ 依類別選擇:                         │
│ [🔢 數學] [🔬 自然] [💬 語言] ...   │
│                                    │
│ → 選擇「數學」後顯示:                │
│ ☑️ 國小數學                         │
│ ☐ 國中數學                         │
│ ☑️ 高中數學                         │
│ ☐ 微積分                           │
└────────────────────────────────────┘
```

### 搜尋模式
```
┌────────────────────────────────────┐
│ [搜尋: 數學_]                       │
│                                    │
│ 搜尋結果:                           │
│ [國小數學] [國中數學✓] [高中數學]   │
│ [微積分] [統計學]                   │
└────────────────────────────────────┘
```

## 📊 對比

| 特性 | 原版 | 輕量版 |
|------|------|--------|
| 預設高度 | ~1200px | ~100px |
| 可折疊 | ❌ | ✅ |
| 搜尋功能 | ❌ | ✅ |
| 類別切換 | 全展開 | 按需展開 |
| 視覺負擔 | 重 | 輕 |
| 適合科目數 | < 50 | 無限制 |

## ✨ 核心功能

### 1. **可折疊設計**
```typescript
const [isOpen, setIsOpen] = useState(false);

// 預設收起，點擊展開
<Button onClick={() => setIsOpen(!isOpen)}>
  {isOpen ? "收起" : "+ 選擇教學科目"}
</Button>
```

### 2. **即時搜尋**
```typescript
const [searchQuery, setSearchQuery] = useState("");

// 輸入時過濾科目
const filteredSubjects = ALL_SUBJECTS.filter((s) =>
  s.toLowerCase().includes(searchQuery.toLowerCase())
);
```

### 3. **類別標籤切換**
```typescript
const [activeCategory, setActiveCategory] = useState<string | null>(null);

// 點擊類別，只顯示該類別科目
<button onClick={() => setActiveCategory(category.name)}>
  {category.icon} {category.name}
</button>
```

### 4. **Checkbox 選擇**
```
更清楚的選擇狀態：
☑️ 已選擇
☐ 未選擇
```

## 🎯 使用流程

### 快速選擇（搜尋）
```
1. 點擊「+ 選擇教學科目」
2. 輸入「數學」
3. 看到所有相關科目
4. 點擊選擇
5. 完成！
```

### 分類瀏覽
```
1. 點擊「+ 選擇教學科目」
2. 點擊「🔢 數學」類別
3. 看到數學類所有科目
4. 勾選需要的
5. 點擊其他類別繼續選擇
6. 完成！
```

### 快速編輯
```
已選科目顯示在上方：
[國中數學 ×] [英文 ×] [程式設計 ×]

點擊 × 即可移除，無需展開！
```

## 💡 優化細節

### 1. **智能計數**
```typescript
// 按鈕顯示已選數量
`+ 選擇教學科目 ${selected.length > 0 ? `(${selected.length})` : ""}`
// 結果：「+ 選擇教學科目 (3)」
```

### 2. **視覺層次**
```css
/* 已選科目 - 最顯眼 */
bg-primary text-primary-foreground

/* 展開按鈕 - 次要 */
variant="outline"

/* 選擇器內容 - 最淡 */
bg-accent/5
```

### 3. **搜尋優先**
```
有搜尋字串時：
→ 隱藏類別選擇
→ 直接顯示搜尋結果
→ 減少視覺干擾
```

### 4. **空狀態處理**
```typescript
{selected.length > 0 ? (
  <SelectedSubjects />
) : (
  <div className="text-muted-foreground">
    尚未選擇科目
  </div>
)}
```

## 📐 空間效率

### 原版（全展開）
```
基本資訊: 300px
教學科目: 1200px  ← 佔大部分空間
教學資訊: 200px
學歷背景: 400px
────────────────
總計: 2100px
```

### 輕量版（收起）
```
基本資訊: 300px
教學科目: 100px   ← 省了 1100px！
教學資訊: 200px
學歷背景: 400px
────────────────
總計: 1000px (-52%)
```

## 🚀 效能優化

### 1. **按需渲染**
```typescript
// 只在展開時渲染選擇器
{isOpen && (
  <SubjectPicker />
)}
```

### 2. **虛擬滾動（未來）**
```typescript
// 如果科目超過 100 個，可以加入
import { VirtualScroller } from 'virtual-scroller';
```

### 3. **防抖搜尋（未來）**
```typescript
// 避免輸入時過度渲染
const debouncedSearch = useMemo(
  () => debounce(setSearchQuery, 300),
  []
);
```

## 🎨 自訂選項

### 改變預設狀態
```typescript
// 預設展開（不建議）
const [isOpen, setIsOpen] = useState(true);

// 首次訪問自動展開
const [isOpen, setIsOpen] = useState(selected.length === 0);
```

### 限制選擇數量
```typescript
const MAX_SUBJECTS = 10;

const toggleSubject = (subject: string) => {
  if (!selected.includes(subject) && selected.length >= MAX_SUBJECTS) {
    alert(`最多只能選擇 ${MAX_SUBJECTS} 個科目`);
    return;
  }
  // ...
};
```

### 推薦科目
```typescript
const RECOMMENDED = ["國中數學", "高中數學", "英文"];

<div className="mb-4">
  <div className="text-xs font-medium mb-2">推薦科目</div>
  {RECOMMENDED.map(subject => (
    <button onClick={() => toggleSubject(subject)}>
      {subject}
    </button>
  ))}
</div>
```

## 📱 響應式設計

### 桌面版
```
左側表單: 充足空間
右側預覽: 即時顯示
科目選擇器: 可以較寬
```

### 手機版
```
全寬顯示
搜尋框優先
類別按鈕換行
清楚的觸控目標
```

## 🔮 未來增強

### Phase 1 (已完成)
- ✅ 可折疊設計
- ✅ 搜尋功能
- ✅ 類別切換
- ✅ Checkbox 選擇

### Phase 2 (可選)
- [ ] 熱門科目推薦
- [ ] 最近選擇記錄
- [ ] 拖拽排序
- [ ] 批次操作

### Phase 3 (進階)
- [ ] AI 推薦（根據學歷）
- [ ] 科目關聯（選數學→推薦物理）
- [ ] 科目樹狀結構
- [ ] 自訂科目標籤

## 💪 優勢總結

### 輕量版優勢
1. **節省空間**: 收起時只佔 100px
2. **按需展開**: 用戶控制，不會一次看到所有
3. **搜尋快速**: 直接輸入，立即找到
4. **無限擴展**: 再多科目也不怕
5. **更專業**: 符合現代 UI 標準

### 適用場景
- ✅ 科目數量 > 30
- ✅ 需要經常增加新科目
- ✅ 表單空間有限
- ✅ 追求現代化體驗

---

**現在編輯頁面輕量多了！** 🎉

收起時只佔一點點空間，需要時再展開選擇。
搜尋功能讓選擇更快速，類別切換更有條理！

